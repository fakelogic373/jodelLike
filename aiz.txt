
import React
from 'react';

import { 
StyleSheet, Text, 
View, Image } 
from 'react-native';

import *
as firebase
from 'firebase';

import 'firebase/firestore';



var config = {

apiKey: "AIzaSyBIVllHxLes9_XUljY2_Jvb3FT0q-myq3g",

authDomain: 
"project1-1de1b.firebaseapp.com",

databaseURL: 
"https://project1-1de1b.firebaseio.com",

projectId: 
"project1-1de1b",

storageBucket: 
"project1-1de1b.appspot.com",

messagingSenderId: 
"727327966129"

}

firebase.initializeApp(config)

const db =
firebase.firestore()



export default
class App
extends React.Component {

state = {

pets: null

}



componentDidMount() {

this.listenForItems()

}



listenForItems() {

db.collection('pets').onSnapshot(



snap => {

// get children as an array

let pets = []

snap.forEach(

doc => {

pets.push({

id: doc.id,

name: doc.data().name

});

});

this.setState({
pets });

});

}



render() {

return (

<View
style={styles.container}>

<Text>Pets !</Text>

{

this.state.pets

?

this.state.pets.map(

pet =>

<Text
key = {pet.id}>

{pet.name}

</Text>

)

:

<View>

<Image
source={require('./loading.gif')}/>

</View>

}

</View>

);

}

}



const styles =
StyleSheet.create({

container: {

flex: 1,

backgroundColor: 
'#fff',

alignItems: 
'center',

justifyContent: 
'center',

},

});
